/* theme.park — Emby base (4.9+ / Tailwind-friendly)
   Goal: keep theme.park variable contract + provide Tailwind token bridge + modern component overrides.
*/

/* Keep theme.park defaults (placeholders + transparency scale) */
@import url("/css/defaults/placeholders.css");
@import url("/css/defaults/transparent.css");

/* ------------------------------------------------------------
   1) Canonical theme variables (theme.park contract)
   ------------------------------------------------------------ */

:root {
  /* Emby “theme-*” variables used throughout older/legacy selectors */
  --theme-primary-color: rgb(var(--accent-color));
  --theme-primary-color-lightened: rgb(var(--accent-color-hover));
  --theme-text-color: var(--text);
  --theme-text-color-opaque: var(--text-hover);
  --theme-accent-text-color: rgb(var(--accent-color));
  --theme-background: var(--main-bg-color);

  /* A couple of layout/surface tokens we control */
  --tp-radius-lg: 16px;
  --tp-radius-md: 12px;
  --tp-radius-sm: 10px;

  --tp-surface-0: var(--theme-background);
  --tp-surface-1: var(--transparency-dark-10);
  --tp-surface-2: var(--transparency-dark-15);
  --tp-surface-3: var(--transparency-dark-25);

  --tp-border: var(--transparency-light-10);
  --tp-border-strong: var(--transparency-light-20);

  --tp-shadow: 0 10px 30px rgba(0,0,0,.35);

  /* Header/footer blur backplates (kept similar to prior base intent) */
  --tp-header-blur: rgba(20,20,20,.66);
  --tp-footer-blur: rgba(29,29,31,.66);

  /* ------------------------------------------------------------
     2) Tailwind token bridge
     Emby 4.9+ uses Tailwind. Many Tailwind-based UIs expose semantic vars
     (shadcn-style: --background/--foreground/--card/etc). We define them
     so Tailwind class-driven markup can still follow your theme variables.
     ------------------------------------------------------------ */

  --background: var(--tp-surface-0);
  --foreground: var(--theme-text-color);
  --muted: var(--tp-surface-1);
  --muted-foreground: rgba(255,255,255,.65);

  --card: var(--tp-surface-2);
  --card-foreground: var(--foreground);

  --popover: var(--modal-bg-color);
  --popover-foreground: var(--foreground);

  --border: var(--tp-border);
  --input: var(--tp-surface-3);

  --primary: rgb(var(--accent-color));
  --primary-foreground: var(--button-text);

  --ring: rgb(var(--accent-color));

  /* Helps form controls render correctly in dark mode */
  color-scheme: dark;
}

/* If Emby applies different layout roots (TV mode vs desktop), keep them coherent */
.layout-tv:root {
  --tp-radius-lg: 18px;
  --tp-radius-md: 14px;
  --tp-radius-sm: 12px;
}

/* ------------------------------------------------------------
   3) Tailwind semantic class helpers (only if Emby uses these)
   These are harmless if unused, and valuable if Emby uses semantic classes.
   ------------------------------------------------------------ */

.bg-background { background: var(--background) !important; }
.text-foreground { color: var(--foreground) !important; }

.bg-card { background: var(--card) !important; }
.text-card-foreground { color: var(--card-foreground) !important; }

.border-border { border-color: var(--border) !important; }

.text-muted-foreground { color: var(--muted-foreground) !important; }
.bg-muted { background: var(--muted) !important; }

.bg-primary { background: var(--primary) !important; }
.text-primary-foreground { color: var(--primary-foreground) !important; }

/* Tailwind “ring” utilities use --tw-ring-color */
.ring-ring { --tw-ring-color: var(--ring) !important; }

/* ------------------------------------------------------------
   4) Global base
   ------------------------------------------------------------ */

html, body {
  background: var(--theme-background);
  color: var(--theme-text-color);
}

/* Links (theme.park style) */
a {
  color: var(--link-color) !important;
}
a:hover {
  color: var(--link-color-hover) !important;
}

/* Subtle scrollbar */
html {
  scrollbar-color: rgba(255,255,255,.30) transparent;
}

/* ------------------------------------------------------------
   5) Header / drawer / footer
   ------------------------------------------------------------ */

/* Legacy Emby selectors (still often present) */
.skinHeader-withBackground {
  background: var(--tp-header-blur) !important;
  border-bottom: 1px solid var(--tp-border) !important;
  -webkit-backdrop-filter: saturate(1.6) blur(14px);
  backdrop-filter: saturate(1.6) blur(14px);
}

.appfooter,
.formDialogFooter:not(.formDialogFooter-clear) {
  background: var(--tp-footer-blur) !important;
  border-top: 1px solid var(--tp-border) !important;
  -webkit-backdrop-filter: saturate(1.6) blur(14px);
  backdrop-filter: saturate(1.6) blur(14px);
}

/* Side drawer (keep simple + “Embymalism-ish” clean panels) */
.navDrawer,
.mainDrawer,
.drawer,
.drawer-content {
  background: rgba(20,20,20,.72) !important;
  -webkit-backdrop-filter: saturate(1.6) blur(18px);
  backdrop-filter: saturate(1.6) blur(18px);
  border-right: 1px solid var(--tp-border) !important;
}

/* ------------------------------------------------------------
   6) Surfaces: cards, lists, dialogs, toasts
   ------------------------------------------------------------ */

.card,
.cardBox,
.paperList,
.listItem,
.sectionTitleContainer {
  background: var(--card) !important;
}

.card,
.cardBox,
.paperList,
.dialog,
.toast {
  border-radius: var(--tp-radius-lg) !important;
}

.card,
.cardBox,
.paperList,
.dialog {
  box-shadow: var(--tp-shadow);
  border: 1px solid var(--tp-border) !important;
}

/* Dialog shells */
.dialog,
.formDialogContent,
.formDialogHeader:not(.formDialogHeader-clear) {
  background: var(--modal-bg-color) !important;
}

/* Toasts */
.toast {
  background: rgba(30,30,30,.78) !important;
  color: var(--theme-text-color-opaque) !important;
  -webkit-backdrop-filter: saturate(1.4) blur(18px);
  backdrop-filter: saturate(1.4) blur(18px);
  border: 1px solid var(--tp-border) !important;
}

/* ------------------------------------------------------------
   7) Controls: buttons, inputs, selects
   ------------------------------------------------------------ */

.emby-button,
.button-submit:not(.emby-button-tv),
.raised,
.fab,
.detailButton-icon {
  background: var(--button-color) !important;
  color: var(--button-text) !important;
  border-radius: var(--tp-radius-md) !important;
  border: 1px solid transparent !important;
}

.emby-button:hover,
.button-submit:not(.emby-button-tv):hover,
.raised:hover,
.fab:hover {
  background: var(--button-color-hover) !important;
  color: var(--button-text-hover) !important;
}

/* Inputs/selects (covers both older and Tailwind-ish component shells) */
input,
textarea,
select,
.emby-input,
.emby-textarea,
.emby-select-withcolor {
  background: var(--input) !important;
  color: var(--theme-text-color-opaque) !important;
  border: 1px solid var(--tp-border) !important;
  border-radius: var(--tp-radius-sm) !important;
}

input:focus,
textarea:focus,
select:focus,
.emby-input:focus,
.emby-textarea:focus {
  outline: none !important;
  border-color: rgb(var(--accent-color)) !important;
  box-shadow: 0 0 0 3px rgba(var(--accent-color), .20) !important;
}

/* ------------------------------------------------------------
   8) Media item polish (minimal / “Embymalism-ish”)
   ------------------------------------------------------------ */

.cardImageContainer,
.primaryImageWrapper,
.itemPoster,
.itemImage {
  border-radius: var(--tp-radius-md) !important;
}

/* Progress bars / watched accents */
.itemProgressBar,
.playbackProgress,
.progressbar,
.mdl-slider__background-flex {
  background: rgba(255,255,255,.12) !important;
}

.itemProgressBar > div,
.playbackProgress > div,
.progressbar > div {
  background: rgb(var(--accent-color)) !important;
}

/* ------------------------------------------------------------
   9) Safety: reduce overly-bright defaults in admin/config pages
   ------------------------------------------------------------ */

.dashboardPage,
.adminPage,
.contentPage {
  background: var(--theme-background) !important;
  color: var(--theme-text-color) !important;
}
